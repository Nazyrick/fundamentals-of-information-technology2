!function(e){function i(i){for(var a,n,o=i[0],d=i[1],l=i[2],_=0,u=[];_<o.length;_++)n=o[_],r[n]&&u.push(r[n][0]),r[n]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);for(c&&c(i);u.length;)u.shift()();return t.push.apply(t,l||[]),s()}function s(){for(var e,i=0;i<t.length;i++){for(var s=t[i],a=!0,o=1;o<s.length;o++){var d=s[o];0!==r[d]&&(a=!1)}a&&(t.splice(i--,1),e=n(n.s=s[0]))}return e}var a={},r={"web/sharebox":0},t=[];function n(i){if(a[i])return a[i].exports;var s=a[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,i,s){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var a in e)n.d(s,a,function(i){return e[i]}.bind(null,a));return s},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="/js/cmodules/";var o=window.webpackJsonp=window.webpackJsonp||[],d=o.push.bind(o);o.push=i,o=o.slice();for(var l=0;l<o.length;l++)i(o[l]);var c=d;t.push([232,"bundles/common","bundles/f8a3b0b69a90b5305d627c89f0bd674e"]),s()}({232:function(e,i,s){e.exports=s("Rzc3")},Rzc3:function(e,i,s){"use strict";s.r(i);s("pIFo");var a=s("nTq2"),r=s("zxIV"),t=s("v+DW"),n={radioBtnOptions:{WALL:0,COMMUNITY:1,STORY:2,IM:3},mrg:e=>vk.rtl?{marginRight:e}:{marginLeft:e},mediaChange(){var e=cur.sbField&&Object(r.data)(cur.sbField,"composer");if(e&&e.addMedia){var i=(radioBtns.like_share||{}).val||0;toggle(geByClass1("add_media_type_"+e.addMedia.lnkId+"_postpone",e.addMedia.menu.menuNode,"a"),1==i||0==i&&cur.sbShareOwn)}},show(e,i){var s=cur.postTo;cur.postTo=!1,cur.shareBoxWidth=450,e.setOptions({hideButtons:!0,grey:!0,width:cur.shareBoxWidth,noRefreshCoords:!0,bodyStyle:"padding: 0;"}),e.removeButtons(),radioBtns.like_share={els:[ge("like_share_my"),ge("like_share_club"),ge("like_share_story"),ge("like_share_mail")],val:i.rbVal},each(radioBtns.like_share.els,function(e,i){var s=domNS(i);hasClass(i,"disabled")&&s&&(addClass(s,"like_share_disabled"),(geByTag1("input",s)||{}).readOnly=!0)}),cur.shareAction="",cur.lang=extend(cur.lang||{},i.lang),cur.sbField=ge("like_share_text"),cur.sbField.getValue=Emoji.val.pbind(cur.sbField),extend(cur,{sbSettingsBtnEl:ge("like_share_settings_btn"),sbFriendsOnlyEl:ge("like_share_friends_only"),sbPostCheckboxEl:ge("like_share_post_checkbox"),sbAva:ge("like_share_ava"),sbTo:[0],sbShareHash:i.shHash,sbMailHash:i.imHash,sbObj:i.shObj,sbList:i.shList||"",sbShareOwn:i.shOwn,sbShParam:i.shParam,shNewUi:i.shNewUi,shButtonLabelBackup:null,sbSend:function(){if(!Object(t.buttonLocked)("like_share_send")){hide("like_share_error");var e=radioBtns.like_share.val,s=n.radioBtnOptions.WALL,a=cur.sbField&&Object(r.data)(cur.sbField,"composer"),o=a?Composer.getSendParams(a):{message:trim(val(cur.sbField))};switch(cur.sbShParam&&(o.share_param=cur.sbShParam),e){case n.radioBtnOptions.COMMUNITY:var d=cur.wdd&&cur.wdd.like_club_dd;if(!d||!d.selCount)return elfocus("like_club_inp");for(var l in d.selected)d.selected.hasOwnProperty(l)&&(s=intval(l.replace(/_$/,"")));case n.radioBtnOptions.WALL:if(vk.widget&&4!==vk.widget)window.allowCallback=function(){ajax.post("like.php",Wall.fixPostParams(extend(o,{act:"a_do_publish",from:"box",to:s,hash:cur.sbShareHash,object:cur.sbObj,list:cur.sbList,ref:cur.section,ret_data:1})),n.options()),cur.shareAction="publish"},Widgets.popupBoxOpen("like.php",{act:"a_allow_publish_box",to:s,object:cur.sbObj,list:cur.sbList},"vk_allow",{height:171});else{var c=0,_=0;isVisible(cur.sbSettingsBtnEl)&&(c=isVisible("like_share_mark_as_ads")&&isChecked("like_share_mark_as_ads")?1:0,_=isChecked("like_share_mute_notifications")||c),ajax.post("like.php",Wall.fixPostParams(extend(o,{act:"a_do_publish",from:"box",to:s,hash:cur.sbShareHash,object:cur.sbObj,list:cur.sbList,ref:i.shRef||cur.section,ret_data:1,friends_only:isVisible(cur.sbFriendsOnlyEl)&&isChecked(cur.sbFriendsOnlyEl)?1:0,close_comments:isVisible(cur.sbSettingsBtnEl)&&isChecked(ge("like_share_close_comments"))?1:0,mark_as_ads:c,mute_notifications:_})),n.options()),cur.shareAction="publish"}break;case n.radioBtnOptions.STORY:var u=new URL(cur.sbObj,document.baseURI).href;window.StoryPublisher&&window.StoryPublisher.init({entrypoint:"story_repost",attachment:{type:"url",text:"attach_wall",url:u}}),curBox().hide();break;case n.radioBtnOptions.IM:var h=cur.wdd&&cur.wdd.like_mail_dd,b=extend(o,{act:"a_send_box",from:"box",to_ids:[],entrypoint:"share",chas:cur.sbMailHash,ajax:1,title:isVisible("like_share_title_wrap")&&val("like_share_title")||"",media:cur.sbObj+(cur.sbList?"/"+cur.sbList:""),ret_data:1});if(!h||!h.selCount)return elfocus("like_im_inp");for(var p in h.selected)h.selected.hasOwnProperty(p)&&b.to_ids.push(p.replace(/_$/,""));b.to_ids=b.to_ids.join(","),ajax.post("al_im.php",Wall.fixPostParams(b),n.options()),cur.shareAction="im_send"}}},sbCheckLen:function(e){checkTextLength(4096,e,"like_share_warn");var i=cur.wdd&&cur.wdd.like_mail_dd,s=i&&i.full&&1==i.selCount;toggle("like_share_title_wrap",i&&radioBtns.like_share.val==n.radioBtnOptions.IM&&(e.lastLen>200&&!s||val("like_share_title")))},sbReInitMediaSelector:function(e){var a=(window.data(cur.sbField,"composer")||{}).addMedia,r=a&&a.getMedias(!0),t=((i.shMediaOpts||{}).limits||[])[e]||0;cur.sbField&&Wall.deinitComposer(cur.sbField),Emoji.init(cur.sbField,{ttDiff:-48,rPointer:!0,ref:"share",noEnterSend:!0,noStickers:!0,controlsCont:cur.sbField.parentNode,checkEditable:function(){cur.sbCheckLen(cur.sbField)}}),Wall.initComposer(cur.sbField,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},media:isVisible("like_share_add_media")?{lnk:ge("like_share_add_media"),preview:ge("like_share_media_preview"),gearEl:ge("like_share_settings_btn"),actionsEl:!1,types:i.shTypes,options:{limit:t,disabledTypes:["album","share","link","page","article","poll"],toggleLnk:!0,nocl:1,toId:s,onAddMediaChange:n.mediaChange,onMediaChange:n.mediaChange}}:void 0}),isArray(r)&&r.length&&(a=(window.data(cur.sbField,"composer")||{}).addMedia,r.slice(0,t).forEach(function(e){a.chooseMedia(e[0],e[1],e[5],null,!0)})),n.mediaChange()}}),cur.sbHidden=!0,setTimeout(elfocus.pbind(cur.sbField),0),e.setOptions({onClean:function(){Wall.deinitComposer(cur.sbField),delete cur.sbField,cur.postTo=s,window.WideDropdown&&(WideDropdown.deinit("like_club_dd"),WideDropdown.deinit("like_mail_dd"))}}),window._mbFriends||ajax.post("hints.php",{act:"a_json_friends",from:"imwrite",str:""},{onDone:function(e){window._sbFriends=e,cur.wdd&&cur.wdd.like_mail_dd&&(e=o(e),WideDropdown.items("like_mail_dd",e))}}),hasClass(ge("like_share_club"),"disabled")||WideDropdown.init("like_club_dd",{defaultItems:i.clubs,noResult:getLang("like_club_not_found"),img:cur.sbAva,noAnim:!0,introText:getLang("like_club_choose"),onChange:function(e){curBox().changed=!0,n.rbChanged(ge("like_share_club"),n.radioBtnOptions.COMMUNITY,!0);var i=cur.wdd.like_club_dd.selCount,s=!0;return 1==e&&setTimeout(elfocus.pbind(cur.sbField),0),i<1&&!cur.sbHidden?(n.toggleAva(!1),s=1):i>0&&cur.sbHidden&&(n.toggleAva(!0),s=1),cur.sbCheckLen(cur.sbField),s}}),hasClass(ge("like_share_mail"),"disabled")||WideDropdown.init("like_mail_dd",{defaultItems:window._mbFriends,url:"hints.php",noAnim:!0,params:{act:"a_json_friends",from:"imwrite"},onDataLoaded:o,noResult:getLang("mail_not_found"),img:cur.sbAva,introText:getLang("mail_choose_recipient"),onChange:function(e){curBox().changed=!0,n.rbChanged(ge("like_share_mail"),n.radioBtnOptions.IM,!0);var i=cur.wdd.like_mail_dd,s=i.selCount,a=!0;return 1==e&&setTimeout(elfocus.pbind(cur.sbField),0),s<1&&!cur.sbHidden?(n.toggleAva(!1),a=0):s>0&&cur.sbHidden&&(n.toggleAva(!0),a=1),cur.sbCheckLen(cur.sbField),n.updateButtonLabel(n.radioBtnOptions.IM,i.selCount),a},allowMultiselectAll:!!cur.shNewUi}),each(geByClass("_like_share_about_select",curBox().bodyNode),function(){hide(this)});var a=radioBtns.like_share.els,d=radioBtns.like_share.val;n.rbChanged(a[d],d)},toggleAva(e){var i=Fx.Transitions.easeOutCubic,s=150,a="ease-out";return e?(show(cur.sbAva),cssAnim(cur.sbAva,extend({opacity:1},n.mrg(0)),{duration:s,transition:i,func:a}),cssAnim(ge("dark_box_topic"),n.mrg(26),{duration:s,transition:i,func:a}),cur.sbHidden=!1,1):(cssAnim(cur.sbAva,extend({opacity:0},n.mrg(-26)),{duration:s,transition:i,func:a},hide.pbind(cur.sbAva)),cssAnim(ge("dark_box_topic"),n.mrg(0),{duration:s,transition:i,func:a}),cur.sbHidden=!0,0)},rbChanged(e,i,s){if(s||cur.sbReInitMediaSelector(i),cur.sbPostCheckboxEl){cur.sbFriendsOnlyEl&&(i===n.radioBtnOptions.WALL?cur.sbFriendsOnlyEl.classList.remove("like_share_friends_only_hidden"):cur.sbFriendsOnlyEl.classList.add("like_share_friends_only_hidden"));var a=ge("like_share_mark_as_ads"),t=ge("like_share_mute_notifications");if(i===n.radioBtnOptions.WALL){if(hide(a),isChecked(a)){var o=+domData(t,"prev-state");disable(t,0),toggleClass(t,"on",o)}}else show(a),isChecked(a)&&(disable(t,1),toggleClass(t,"on",1));i===n.radioBtnOptions.IM?cur.sbPostCheckboxEl.classList.add("like_share_post_checkbox_hidden"):cur.sbPostCheckboxEl.classList.remove("like_share_post_checkbox_hidden"),i===n.radioBtnOptions.STORY?hide("like_share_title_header","like_share_emoji_wrap","like_share_add_media","like_share_post_checkbox"):show("like_share_title_header","like_share_emoji_wrap","like_share_add_media","like_share_post_checkbox")}radiobtn(e,i,"like_share"),getLang("title_for_all")&&val("dark_box_topic",getLang(i===n.radioBtnOptions.IM?"title_for_mail":"title_for_all")),val("like_share_title_header",getLang(i===n.radioBtnOptions.IM?"likes_select_message":"like_select_comment")),each(geByClass("_like_share_about_select",curBox().bodyNode),function(){hide(this)}),show(domNS(e));var d=cur.sbField&&Object(r.data)(cur.sbField,"composer");if(d&&d.addMedia){var l,c=d.addMedia,_=c.menu;if(i===n.radioBtnOptions.COMMUNITY||i===n.radioBtnOptions.WALL&&cur.sbShareOwn){if(c.limit>(c.getMedias(!0)||[]).length){var u=[];l=i===n.radioBtnOptions.COMMUNITY,each(_.types,function(e,i){"mark_as_ads"===i[0]&&(l&&d.addMedia.markAsAds||!l)||u.push(i)}),_.setItems(u)}show(geByClass1("add_media_type_"+d.addMedia.lnkId+"_postpone",d.addMedia.menu.menuNode,"a")),cur.sbPostponeDate&&"postpone"==d.addMedia.chosenMedia[0]&&d.addMedia.chosenMediaData&&(d.addMedia.chosenMediaData.date=cur.sbPostponeDate,d.addMedia.chooseMedia("postpone",d.addMedia.chosenMedia[1],d.addMedia.chosenMediaData),hide(domFC(ge("like_share_add_media"))),cur.sbPostponeDate=!1),d.addMedia.postponePreview&&show(domPN(d.addMedia.postponePreview)),d.addMedia.markAsAds&&(l?show(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview")))):hide(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview")))))}else{if(c.limit>(c.getMedias(!0)||[]).length){var h=[];each(_.types,function(e,i){"postpone"!==i[0]&&"mark_as_ads"!==i[0]&&h.push(i)}),_.setItems(h)}hide(geByClass1("add_media_type_"+d.addMedia.lnkId+"_postpone",d.addMedia.menu.menuNode,"a")),d.addMedia.chosenMedia&&"postpone"==d.addMedia.chosenMedia[0]&&(cur.sbPostponeDate=val("postpone_date"+d.addMedia.lnkId),val("like_share_media_preview",""),show(domFC(ge("like_share_add_media")))),d.addMedia.postponePreview&&hide(domPN(d.addMedia.postponePreview)),d.addMedia.markAsAds&&hide(domPN(geByClass1("page_preview_mark_as_ads_wrap",ge("like_share_media_preview"))))}}if(!0!==s){switch(i){case n.radioBtnOptions.WALL:if(!cur.sbHidden){var b=Fx.Transitions.easeOutCubic,p="ease-out";cssAnim(cur.sbAva,extend({opacity:0},n.mrg(-26)),{duration:150,transition:b,func:p},hide.pbind(cur.sbAva)),cssAnim(ge("dark_box_topic"),n.mrg(0),{duration:150,transition:b,func:p}),cur.sbHidden=!0}elfocus(cur.sbField);break;case n.radioBtnOptions.COMMUNITY:case n.radioBtnOptions.IM:var m=i==n.radioBtnOptions.COMMUNITY?"like_club_dd":"like_mail_dd";cur.wdd[m].selCount?elfocus(cur.sbField):WideDropdown.focus(m),WideDropdown.updimgs(m)}var g=cur.wdd.like_mail_dd?cur.wdd.like_mail_dd.selCount:0;n.updateButtonLabel(i,g)}},options:()=>({showProgress:t.lockButton.pbind("like_share_send"),hideProgress:t.unlockButton.pbind("like_share_send"),onDone:function(e,i){cur.likeData=i,curBox().hide(),showDoneBox(e),!cur.sbObj.indexOf(":")&&isObject(i)&&a.Likes.update(cur.sbObj,i),cur.storyLayer&&"im_send"===cur.shareAction&&cur.storyLayer._sendNavigationStatEvents("share_to_message"),window.Videoview&&/^video\-?\d+_\d+$/.test(cur.sbObj)&&Videoview.onVideoShared(cur.shareAction,cur.sbObj,cur.sbList),cur.app&&window.isFunction(cur.app.vkMiniAppShareSuccess)&&cur.app.vkMiniAppShareSuccess(i),/^(market)(.*)/.test(cur.sbObj)&&cur.onShare&&cur.onShare(cur.sbObj,i),delete cur.shareAction},onFail:function(e){return ge("like_share_error").innerHTML='<div class="msg_text">'+e+"</div>",show("like_share_error"),!0}}),updateButtonLabel(e,i){cur.shNewUi&&(cur.shButtonLabelBackup||(cur.shButtonLabelBackup=ge("like_share_send").innerHTML),e===n.radioBtnOptions.IM?ge("like_share_send").innerHTML=i>1?getLang("mail_send_separate"):getLang("mail_send2"):e===n.radioBtnOptions.STORY?ge("like_share_send").innerHTML=getLang("like_go_to_story_editor"):ge("like_share_send").innerHTML=cur.shButtonLabelBackup)}};function o(e){return e.forEach(function(e){e[9]&&e[9].is_casper&&(e[1]='<span class="chat_title_casper"><span class="chat_title_casper_text">'+e[1]+"</span></span>")}),e}window.ShareBox=n;try{window.stManager.done(window.jsc("web/sharebox.js"))}catch(e){}}});