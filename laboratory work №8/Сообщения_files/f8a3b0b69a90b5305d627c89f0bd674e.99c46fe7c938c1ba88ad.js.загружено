(window.webpackJsonp=window.webpackJsonp||[]).push([["bundles/f8a3b0b69a90b5305d627c89f0bd674e"],{nTq2:function(e,t,i){"use strict";i.r(t),i.d(t,"Likes",function(){return _});i("91GP"),i("a1Th"),i("Btvt"),i("rE2o"),i("ioFf"),i("rGqo"),i("pIFo"),i("SRfc");var s=i("zxIV"),a=i("FWc3"),o=i("t7n3"),r=i("7jxN"),n=i("/PiP"),c=i("jE6c");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var i=[],s=!0,a=!1,o=void 0;try{for(var r,n=e[Symbol.iterator]();!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d="like",p="share",v="views",h="comment",_={toggle(e,t,i,a){if(cancelEvent(t),isObject(window.cur)&&Object(c.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();var o=Object(s.hasClass)(e,"active");Object(s.addClass)(e,"animate"),this.clientUpdate(i,d,o?-1:1,!o),ajax.post("like.php",{act:o?"a_do_unlike":"a_do_like",object:i,hash:a,list:cur.pvListId,wall:2,from:this._getReference(i)},{onDone:t=>{this.update(i,t);var s=i.match(/^(wall|market)(.*)/);s&&cur.onLike&&cur.onLike(e,s[1],s[2],o)},onFail:()=>(Object(s.toggleClass)(e,"active",o),this.clientUpdate(i,d,o?1:-1,o),!1)}),intval(domData(e,"count"))>0?_.showLikes(e,i,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_parseObjectId(e){var t=u(e.match(/^([a-z_]+)([0-9\-_]+)$/),3);return{objectType:t[1],objectId:t[2]}},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?`feed_recommended${"recent"!==cur.subsection?"_"+cur.subsection:""}`:inArray(cur.section,["friends","groups","videos","photos"])?`feed_${cur.subsection?"_"+cur.subsection:""}`:`feed_${cur.section}`:"top"===cur.wallType?"wall_top":`wall_${cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"}`:cur.module,share(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(vk.widget&&!vk.id)return window.Widgets.oauth();if(isObject(window.cur)&&Object(c.isFunction)(cur.viewAsBox))return cur.viewAsBox();var i=this._parseObjectId(e),s=i.objectType,a=i.objectId;showBox("like.php",l({act:"publish_box",object:e},t),{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]}),"wall"===s&&window.Wall&&Wall.triggerAdPostStat(a,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>_.update(e,window.cleanObj(t)))},clientUpdate(e,t,i,s){var a=this._getButtonsByType(e,t);if(a.length){var o=intval(domData(a[0],"count"))+i;this._updateDom(e,t,o,s),this.updateExternalIndex(e,{type:t,count:o,isActive:s})}},update(e,t){if(!isNaN(parseInt(t.like_num))){var i=isUndefined(t.like_my)?void 0:!!intval(t.like_my);this._updateDom(e,d,t.like_num,i,t.like_title),this.updateExternalIndex(e,{type:d,count:t.like_num,isActive:i})}if(!isNaN(parseInt(t.share_num))){var s=isUndefined(t.share_my)?void 0:!!intval(t.share_my);this._updateDom(e,p,t.share_num,s,t.share_title),this.updateExternalIndex(e,{type:p,count:t.share_num})}isNumeric(t.views_num)&&this._updateDom(e,v,t.views_num,void 0,t.views_title),isNumeric(t.comment_num)&&this._updateDom(e,h,t.comment_num)},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,i,a,n){var c=this._getButtonsByType(e,t),l=t===v,u="";l?u=i:i>0&&(u=vk.widget?Object(o.formatCount)(i):langNumeric(i,"%s",!0)),l||(i=intval(i));for(var h=0;h<c.length;h++){var _=c[h];if(!Object(s.hasClass)(_,"no_counter")){var m=l?c[h]:geByClass1("like_button_count",c[h]);Object(r.animateCount)(m,u,{str:"auto",noWrapWidth:!l,noSpaceIfEmpty:!0}),Object(s.toggleClass)(_,"empty",i<=0),"boolean"==typeof a&&Object(s.toggleClass)(_,"active",a),attr(c[h],"data-count",i),l&&attr(c[h],"title",n||"");var w=c[h].tt;if(w){var b=domByClass(w.container,"_content"),k=domByClass(w.container,"_value"),f=domByClass(w.container,"_title"),y=intval(val(k));val(k,i),n&&val(f,n),isObject(w)&&(w.likeInvalidated=!0),(y!==i&&y<7||!1===n)&&(t===d?_.needReinitLikesTT=!0:t===p&&(_.needReinitShareTT=!0)),inArray(t,[d])&&Object(s.toggleClass)(b,"me_hidden",!a),!1===n&&w.destroy&&w.destroy()}}}},_getButtonsByType:(e,t)=>domQuery(`._like_${e} ._${t}`),showLikes(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e.postDontShowLikes||vk.widget&&vk.show_external_auth_box)){var s=i.views?{views:1}:i.share?{published:1}:{};i.listId&&(s.list=i.listId);var o,r,n=!!geByClass1("share",gpeByClass("like_wrap",e)),c=getComputedStyle(e),l=intval(c.getPropertyValue("padding-left").replace("px","")),u=intval(c.getPropertyValue("padding-top").replace("px","")),d=geByClass1("like_button_icon",e),p=[40-getSize(d)[0]/2-l,10-u],v=i.cl||"";if(i.share)v+="likes_tt_share";else if(v+="likes_tt_like","wpost"===i.from)p[0]=12;else if("widget_community"===i.from)p[0]=6;else if("wcomments"===i.from||"widget_comments"===cur.wallType){p[0]=getSize(e)[0]+16-getSize(d)[0]/2-10}i.share?(o="needReinitLikesTT",r="resetLikesTTTimer"):(o="needReinitShareTT",r="resetShareTTTimer"),clearTimeout(e[r]),Object(a.showTooltip)(e,{url:"/like.php",params:extend({act:"a_get_stats",object:t,has_share:n?1:""},s),appendEl:bodyNode,slide:15,shift:p,ajaxdt:i.fast?0:100,showdt:i.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{_.showLikes(e,t,i)}},typeClass:"like_tt",className:v,onHide:()=>{clearTimeout(e[r]),e[o]&&(e[r]=setTimeout(()=>{delete e[o],e.tt&&e.tt.destroy&&e.tt.destroy()},200))}})}},showShare:function(e,t,i){_.showLikes(e,t,extend(i,{share:1}))},updateViews:function(e){vk.widget&&vk.show_external_auth_box||ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,i){var s=ce("div",{innerHTML:i});_._updateDom(e,v,t,void 0,s.innerText||s.textContent)}})},makeTemplate(e,t){return(t=extend({object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?langNumeric(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?langNumeric(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name=t.likes_count>0?"":"empty",t.share_class_name=t.share_count>0?"":"empty",rs(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._parseObjectId(e),s=i.objectType,a=i.objectId;switch(s){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==a)return;var o=cur.pvListId,r=cur.pvIndex,n=cur.pvData[o][r];t.type===d?(n.likes=t.count,n.liked=t.isActive,cur.pvCommsLikes[n.id][1]=t.count):t.type===p&&(n.shares=t.count);break;case"video":if(window.mvcur&&mvcur.mvShown&&mvcur.videoRaw===a&&t.type===d){var c=Videoview.getMvData();c.likes=t.count,void 0!==t.isActive&&(c.liked=t.isActive,Videoview.playerOnLiked(t.isActive),Videoview.recache())}}},showLikesList(e,t){cur.viewAsBox||Object(s.hasClass)(gpeByClass("like_btn",e),"no_counter")||Object(n.showWiki)({w:"likes/"+clean(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||Object(s.hasClass)(gpeByClass("like_btn",e),"no_counter")||Object(n.showWiki)({w:"shares/"+clean(t)},!1,!1,{queue:1})}}}}]);try{stManager.done("cmodules/bundles/f8a3b0b69a90b5305d627c89f0bd674e.99c46fe7c938c1ba88ad.js")}catch(e){}